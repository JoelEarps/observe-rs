# release-plz configuration
# See: https://release-plz.dev/docs/configuration/reference
#
# Only valid top-level sections: [workspace], [changelog], [[package]].
# Use [[package]] with name = "crate-name" (array of tables), NOT [packages.crate-name].
#
# Versioning: Conventional commits → SemVer. Tags: v1.0.0. Changelog: CHANGELOG.md. Commit before release.

# -----------------------------------------------------------------------------
# [workspace] — defaults for all packages
# -----------------------------------------------------------------------------
[workspace]
# Require a clean working tree: no uncommitted changes when running release-plz (default: false = clean required).
allow_dirty = false

# Changelog: generated by default; path is set per-package below.
# Conventional commits: used by default for version bumping and changelog.

# Git tag: create a tag per release. Format v1.0.0 (single crate default).
git_tag_enable = true
git_tag_name = "v{{ version }}"

# Git release: create a GitHub/Gitea release for the tag.
git_release_enable = true

# -----------------------------------------------------------------------------
# Package overrides ([[package]] = array of tables; name is required)
# -----------------------------------------------------------------------------
[[package]]
name = "observe-rs"

# Where the changelog is written (relative to repo root). Created on first release if missing.
changelog_path = "docs/CHANGELOG.md"

# Publish to crates.io (set to false for manual review).
publish = true

# Verify the crate with ALL features at publish time (cargo publish --all-features).
# Ensures every feature combination is valid so users can pick any subset safely.
publish_all_features = true

# Run cargo-semver-checks so API breaking changes are caught before release (recommended for libraries).
semver_check = true
